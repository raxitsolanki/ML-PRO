{% extends "layout_app.html" %}

{% block title %}Diagnostic Prediction - DSP Health{% endblock %}

{% block content %}
<style>
    /* Premium Font Import */
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
    
    .premium-font { font-family: 'Plus Jakarta Sans', sans-serif; }
    
    /* Smooth Fade-in Animation */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }
</style>

<div class="p-6 lg:p-12 bg-slate-50 min-h-screen premium-font">
    
    <div class="text-center max-w-2xl mx-auto mb-12 animate-fade-in">
        <span class="inline-flex items-center gap-2 text-emerald-600 font-bold text-xs uppercase tracking-[0.4em] mb-3">
            <i class="fa-solid fa-robot text-[12px]"></i>
            REPORT AI Intelligence
        </span>
        
        
        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-3">
            Health <span class="text-emerald-500">Prediction</span>
        </h1>
        
        
        
        <p class="text-slate-500 font-medium text-lg leading-relaxed px-4">
            Enter patient clinical metrics for a high-precision, real-time machine learning diagnosis.
        </p>
    </div>
    <div class="max-w-4xl mx-auto mb-6 flex justify-end">
        <div class="bg-white border border-emerald-100 rounded-[2.2rem] 
                    shadow-xl shadow-emerald-100/40 px-6 py-4 
                    flex items-center gap-6 animate-fade-in">
    
            <div class="text-right hidden sm:block">
                <p class="text-[11px] font-black uppercase tracking-[0.3em] text-emerald-600 flex items-center gap-2">
                    Advanced Mode
                    <i class="fa-solid fa-arrow-right text-[10px] text-emerald-500 group-hover:translate-x-1 transition-transform"></i>
                </p>
                
                
                <p class="text-xs text-slate-400 font-medium">
                    Biometric Prediction based diagnosis 
                </p>
            </div>
    
            <a href="{{ url_for('finger_prediction') }}"
               class="group relative px-8 py-5 
                      bg-emerald-600 text-white 
                      rounded-[2rem] font-black text-[11px]
                      tracking-[0.3em] uppercase 
                      shadow-2xl 
                      flex items-center gap-3
                      hover:bg-emerald-500 transition-all
                      hover:-translate-y-1 active:scale-95">
    
                <i class="fa-solid fa-fingerprint text-xl 
                          group-hover:scale-110 transition-transform"></i>
                <span>Fingerprint AI</span>
                
            </a>
        </div>
    </div>
    
    
    <div class="max-w-4xl mx-auto">
        <form action="{{ url_for('prediction') }}" method="POST" 
              class="bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200/60 p-8 md:p-12 border border-slate-100 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 animate-fade-in">

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Gender Identity</label>
                <div class="relative group">
                    <i class="fa-solid fa-venus-mars absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <select name="gender" class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all  cursor-pointer" required>
                        <option value="">Select Gender</option>
                        <option value="0">Female</option>
                        <option value="1">Male</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Patient Age</label>
                <div class="relative group">
                    <i class="fa-solid fa-calendar-day absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <input type="number" name="age" step="1" min="1" max="120" placeholder="e.g. 45"
                           class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all" required>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Hypertension</label>
                <div class="relative group">
                    <i class="fa-solid fa-droplet absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <select name="hypertension" class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all  cursor-pointer" required>
                        <option value="0">No History</option>
                        <option value="1">Has Hypertension</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Heart Disease</label>
                <div class="relative group">
                    <i class="fa-solid fa-heart-pulse absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <select name="heart_disease" class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all  cursor-pointer" required>
                        <option value="0">No History</option>
                        <option value="1">Has Heart Disease</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Smoking History</label>
                <div class="relative group">
                    <i class="fa-solid fa-smoking absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <select name="smoking" class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all  cursor-pointer" required>
                        <option value="0">Never Smoked</option>
                        <option value="1">Former Smoker</option>
                        <option value="2">Current Smoker</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Body Mass Index (BMI)</label>
                <div class="relative group">
                    <i class="fa-solid fa-weight-scale absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <input type="number" name="bmi" step="0.1" min="10" max="60" placeholder="e.g. 24.5"
                           class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all" required>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">HbA1c Level</label>
                <div class="relative group">
                    <i class="fa-solid fa-vial absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <input type="number" name="hba1c" step="0.1" min="3" max="15" placeholder="e.g. 5.7"
                           class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all" required>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Blood Glucose</label>
                <div class="relative group">
                    <i class="fa-solid fa-gauge-high absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-emerald-500 transition-colors"></i>
                    <input type="number" name="glucose" step="1" min="50" max="400" placeholder="mg/dL"
                           class="w-full pl-11 pr-4 py-3.5 rounded-2xl border-2 border-slate-50 bg-slate-50/50 text-sm font-semibold text-slate-700 focus:bg-white focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all" required>
                </div>
            </div>

            <div class="md:col-span-2 pt-8">
                <button type="submit"
                        class="w-full bg-slate-900 text-white py-6 rounded-[2rem] font-black text-sm tracking-[0.3em] shadow-2xl shadow-slate-300 
                               flex items-center justify-center gap-4 hover:bg-emerald-600 transition-all duration-300 
                               hover:-translate-y-1 active:scale-[0.97] uppercase group">
                    
                    <i class="fa-solid fa-microscope text-emerald-400 text-xl group-hover:rotate-12 transition-transform"></i>
                    <span>Generate Report Diagnosis</span>
                    <i class="fa-solid fa-arrow-right text-slate-500 group-hover:text-white group-hover:translate-x-2 transition-all"></i>
                </button>
                
            </div>
        </form>

        {% if prediction %}
        <div class="mt-16 animate-fade-in max-w-5xl mx-auto">
            <div class="relative overflow-hidden rounded-[3.5rem] border-2 {% if 'NOT' in prediction %}border-emerald-100 bg-white{% else %}border-red-100 bg-white{% endif %} shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] transition-all group">
                
                <div class="absolute -right-20 -top-20 w-96 h-96 {% if 'NOT' in prediction %}bg-emerald-100/50{% else %}bg-red-100/50{% endif %} rounded-full blur-[100px] animate-pulse"></div>
                <div class="absolute -left-20 -bottom-20 w-96 h-96 {% if 'NOT' in prediction %}bg-emerald-50/50{% else %}bg-red-50/50{% endif %} rounded-full blur-[100px]"></div>
        
                <div class="relative z-10 p-8 md:p-14">
                    <div class="flex flex-col lg:flex-row items-center gap-12">
                        
                        <div class="relative shrink-0">
                            <div class="w-40 h-40 rounded-full border-4 border-dashed {% if 'NOT' in prediction %}border-emerald-200 animate-[spin_10s_linear_infinite]{% else %}border-red-200 animate-[spin_10s_linear_infinite]{% endif %} flex items-center justify-center p-4">
                                <div class="w-full h-full rounded-full {% if 'NOT' in prediction %}bg-emerald-500 shadow-[0_0_30px_rgba(16,185,129,0.4)]{% else %}bg-red-500 shadow-[0_0_30px_rgba(239,68,68,0.4)]{% endif %} flex items-center justify-center text-white text-5xl">
                                    <i class="fa-solid {% if 'NOT' in prediction %}fa-check-double{% else %}fa-dna{% endif %}"></i>
                                </div>
                            </div>
                        </div>
        
                        <div class="text-center lg:text-left flex-1">
                            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full {% if 'NOT' in prediction %}bg-emerald-100 text-emerald-700{% else %}bg-red-100 text-red-700{% endif %} text-[10px] font-black uppercase tracking-[0.3em] mb-6">
                                <span class="relative flex h-2 w-2">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full {% if 'NOT' in prediction %}bg-emerald-400{% else %}bg-red-400{% endif %} opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-2 w-2 {% if 'NOT' in prediction %}bg-emerald-500{% else %}bg-red-500{% endif %}"></span>
                                </span>
                                Diagnostic Verdict
                            </div>
        
                            <h2 class="text-3xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">
                                {{ prediction }}
                            </h2>
                            
                            <p class="text-slate-500 font-medium text-lg mb-10 max-w-xl">
                                Our AI-driven clinical model has analyzed your blood glucose, HbA1c, BMI, and lifestyle indicators to assess your diabetes risk and generate personalized health recommendations.
                            </p>
                            
        
                            <div class="flex flex-wrap gap-5 justify-center lg:justify-start">
                                <a href="{{ url_for('suggestion') }}" 
                                   class="group/btn relative px-10 py-5 {% if 'NOT' in prediction %}bg-emerald-600{% else %}bg-red-600{% endif %} text-white rounded-[2rem] font-bold text-xs tracking-widest overflow-hidden transition-all hover:scale-105 active:scale-95 shadow-2xl">
                                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover/btn:translate-y-0 transition-transform duration-300"></div>
                                    <span class="relative flex items-center gap-3">
                                        <i class="fa-solid fa-wand-magic-sparkles"></i>
                                        VIEW HEALTH SUGGESTIONS
                                    </span>
                                </a>
        
                                <a href="{{ url_for('download_report', user_id=session['id']) }}"
                                download
                                class="px-8 py-5 bg-slate-900 text-white rounded-[2rem] font-bold text-xs tracking-widest hover:bg-slate-800 transition-all flex items-center gap-3 shadow-xl">
                                 <i class="fa-solid fa-file-pdf"></i>
                                 DOWNLOAD REPORT
                             </a>
                         

                             
                            </div>
                        </div>
                    </div>
                </div>
        
                <div class="{% if 'NOT' in prediction %}bg-emerald-600{% else %}bg-red-600{% endif %} py-4 px-10 flex justify-between items-center text-white/80 text-[10px] font-bold tracking-[0.2em] uppercase">
                   
                    <span class="hidden md:block">Real-time AI Processing</span>
                    
                </div>
            </div>
        </div>
        
        {% endif %}
    </div>
</div>
{% endblock %}